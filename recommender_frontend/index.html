<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context-Aware Outfit Builder</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load custom styles for tabs and uploader -->
    <link rel="stylesheet" href="style.css">
    <script>
        // Custom Tailwind configuration
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
</head>

<body class="bg-gray-100 font-sans antialiased flex items-center justify-center min-h-screen p-4">

    <!-- Main Application Card -->
    <div class="bg-white w-full max-w-4xl rounded-2xl shadow-xl p-6 md:p-10">

        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Context-Aware Outfit Builder</h1>
            <p class="text-gray-500 mt-1">Powered by CLIP Visual & Text AI</p>
        </div>

        <!-- Main Form Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">

            <!-- Column 1 & 2: Seed Item Selection -->
            <div class="md:col-span-2">
                <label for="seed-item" class="block text-sm font-medium text-gray-700 mb-2">1. Select a "Seed" Item</label>
                
                <!-- Tab Buttons -->
                <div class="flex border-b border-gray-200">
                    <button data-tab="catalog-tab" class="tab-button active">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" /></svg>
                        Select from Catalog
                    </button>
                    <button data-tab="upload-tab" class="tab-button">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                        Upload Your Item
                    </button>
                </div>

                <!-- Tab Content Area -->
                <div class="pt-4">
                    <!-- Catalog Tab Content -->
                    <div id="catalog-tab" class="tab-content">
                        <select id="seed-item" class="w-full p-3 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" disabled selected>Connecting to server for catalog...</option>
                        </select>
                    </div>
                    <!-- Upload Tab Content -->
                    <div id="upload-tab" class="tab-content hidden">
                        <!-- File Drop Zone -->
                        <div id="file-drop-zone" class="w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-blue-500 hover:bg-gray-50">
                            <input type="file" id="file-input" class="hidden" accept="image/png, image/jpeg, image/webp">
                            <p class="text-gray-500">Drag & drop an image here, or click to select</p>
                        </div>
                        <!-- File Preview Area -->
                        <div id="file-preview" class="hidden w-full mt-4 flex items-center p-3 border border-gray-200 rounded-lg bg-gray-50">
                            <img id="preview-image" src="#" alt="Image Preview" class="w-16 h-16 object-cover rounded-md">
                            <span id="preview-filename" class="ml-3 text-sm text-gray-700 truncate"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Column 3: Context & Gender -->
            <div>
                <label for="context" class="block text-sm font-medium text-gray-700 mb-2">2. Select an Occasion</label>
                <select id="context" class="w-full p-3 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="any">Any Occasion</option>
                    <option value="casual_weekend">Casual Weekend</option>
                    <option value="job_interview">Job Interview</option>
                    <option value="party">Party / Night Out</option>
                    <option value="sporty">Sporty / Active</option>
                </select>

                <!-- NEW: Gender Dropdown -->
                <label for="gender" class="block text-sm font-medium text-gray-700 mb-2 mt-4">3. Select Gender</label>
                <select id="gender" class="w-full p-3 border border-gray-300 rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="women">Women's</option>
                    <option value="men">Men's</option>
                    <option value="unisex">Unisex</option>
                </select>
            </div>
        </div>

        <!-- Build Outfit Button -->
        <button id="build-outfit-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
            Build Outfit
        </button>

        <!-- Loader -->
        <div id="loader" class="hidden text-center my-6">
            <svg class="animate-spin h-8 w-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="text-gray-500 text-sm mt-2">Finding the perfect items...</p>
        </div>

        <!-- Results Display Area -->
        <div class="mt-10">
            <h2 id="outfit-title" class="text-xl font-bold text-gray-900 mb-4 hidden">Your Complete Outfit</h2>
            <div id="outfit-display" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <!-- Outfit items will be injected here by app.js -->
            </div>
        </div>

    </div>

    <!-- Load the JavaScript file -->
    <script src="app.js"></script>

</body>

</html>